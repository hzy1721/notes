import{_ as o,c as e,o as a,U as l}from"./chunks/framework.e548c890.js";const s="/assets/cookie.1cf5d70c.png",h=JSON.parse('{"title":"cookie","description":"","frontmatter":{},"headers":[],"relativePath":"fe/browser/cookie.md","filePath":"fe/browser/cookie.md","lastUpdated":1683687303000}'),n={name:"fe/browser/cookie.md"},c=l('<h1 id="cookie" tabindex="-1">cookie <a class="header-anchor" href="#cookie" aria-label="Permalink to &quot;cookie&quot;">​</a></h1><p>cookie 是服务端发送给浏览器的少量数据，浏览器保存这些数据，后续发送给相同服务器的请求中带上这些数据，从而使服务器知道哪些请求来自同一个浏览器。</p><p>本质是为了给无状态的 HTTP 提供记录状态的功能。</p><p><img src="'+s+`" alt=""></p><h2 id="set-cookie" tabindex="-1">Set-Cookie <a class="header-anchor" href="#set-cookie" aria-label="Permalink to &quot;Set-Cookie&quot;">​</a></h2><p>设置 cookie 的响应头。</p><div class="language-http"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">Set-Cookie</span><span style="color:#F78C6C;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key1=value1;key2=value2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">Set-Cookie</span><span style="color:#F78C6C;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key1=value1</span></span>
<span class="line"><span style="color:#F07178;">Set-Cookie</span><span style="color:#F78C6C;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key2=value2</span></span></code></pre></div><h3 id="发送目标" tabindex="-1">发送目标 <a class="header-anchor" href="#发送目标" aria-label="Permalink to &quot;发送目标&quot;">​</a></h3><ul><li><code>Domain</code>：Cookie 应该发送到哪些域名 <ul><li>默认：请求域名，<strong>不包括</strong>子域名</li><li>显式设置为服务端域名，包含子域名 <ul><li>比如设置 <code>Domain=mozilla.org</code>，也会向 <code>developer.mozilla.org</code> 发送 Cookie</li></ul></li></ul></li><li><code>Path</code>：Cookie 应该发送到哪些路径 <ul><li>默认：请求路径</li><li>某个路径：包括子路径 <ul><li>比如设置 <code>Path=/docs</code>，也会匹配 <code>/docs/</code>、<code>/docs/web</code>、<code>/docs/web/http</code> 等</li></ul></li></ul></li></ul><h3 id="过期时间" tabindex="-1">过期时间 <a class="header-anchor" href="#过期时间" aria-label="Permalink to &quot;过期时间&quot;">​</a></h3><ul><li><code>Expires</code>：过期时间，GMT 格式，到期 Cookie 被删除 <ul><li>默认是 Session Cookie</li></ul></li><li><code>Max-Age</code>：有效时间，以秒为单位，到期 Cookie 被删除</li></ul><h3 id="安全相关" tabindex="-1">安全相关 <a class="header-anchor" href="#安全相关" aria-label="Permalink to &quot;安全相关&quot;">​</a></h3><ul><li><code>Secure</code>：只使用 HTTPS 发送 Cookie，可以防止中间人攻击</li><li><code>HttpOnly</code>：JS 无法通过 <code>document.cookie</code> 访问 Cookie，可以防止 XSS 攻击</li><li><code>SameSite</code>：是否通过跨站请求发送 Cookie，可以防止 CSRF 攻击 <ul><li><code>Strict</code>：只在 Cookie 设置的站点发送</li><li><code>Lax</code> (默认)：同 Strict，但是允许从外部站点跳转到源站点时发送 Cookie <ul><li>安全 HTTP 方法：<code>GET</code>、<code>HEAD</code>、<code>OPTIONS</code></li><li>执行顶级导航 (更改浏览器地址栏中的 URL)，而不是 iframe 或 AJAX 请求</li></ul></li><li><code>None</code>：允许跨站请求发送 Cookie，必须设置 <code>Secure</code>，否则失效</li></ul></li></ul><h2 id="cookie-1" tabindex="-1">Cookie <a class="header-anchor" href="#cookie-1" aria-label="Permalink to &quot;Cookie&quot;">​</a></h2><p>请求与 <code>Domain/Path</code> 匹配的 URL 时，会在 <code>Cookie</code> 请求头带上 cookie。</p><div class="language-http"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">Cookie</span><span style="color:#F78C6C;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key1=value1;key2=value2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">Cookie</span><span style="color:#F78C6C;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key1=value1</span></span>
<span class="line"><span style="color:#F07178;">Cookie</span><span style="color:#F78C6C;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key2=value2</span></span></code></pre></div><h2 id="document-cookie" tabindex="-1">document.cookie <a class="header-anchor" href="#document-cookie" aria-label="Permalink to &quot;document.cookie&quot;">​</a></h2><p>JS 通过 <code>document.cookie</code> 读写非 <code>HttpOnly</code> 的 cookie。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 添加 cookie</span></span>
<span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cookie </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yummy_cookie=choco</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 多次赋值会添加 cookie，不会覆盖</span></span>
<span class="line"><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cookie </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tasty_cookie=strawberry</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 读取所有 cookie</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cookie)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// yummy_cookie=choco; tasty_cookie=strawberry</span></span></code></pre></div><h2 id="限制" tabindex="-1">限制 <a class="header-anchor" href="#限制" aria-label="Permalink to &quot;限制&quot;">​</a></h2><ul><li>每个键值对不能超过 4KB</li><li>每个域名的 cookie 上限大约 20 个</li></ul><h2 id="用途" tabindex="-1">用途 <a class="header-anchor" href="#用途" aria-label="Permalink to &quot;用途&quot;">​</a></h2><ul><li>会话管理 (Session Management) <ul><li>登录、购物车、游戏分数等服务器需要存储的状态信息</li></ul></li><li>个性化 (Personalization) <ul><li>用户偏好设置、主题等其他设置信息</li></ul></li><li>跟踪 (Tracking) <ul><li>记录和分析用户的行为</li></ul></li></ul><h2 id="第三方-cookie" tabindex="-1">第三方 Cookie <a class="header-anchor" href="#第三方-cookie" aria-label="Permalink to &quot;第三方 Cookie&quot;">​</a></h2><ul><li>由请求的页面以外的其他域设置的 Cookie，称为第三方 Cookie，通常用于跟踪和广告</li><li>浏览器允许禁止第三方 Cookie</li></ul>`,25),i=[c];function t(p,r,d,k,u,C){return a(),e("div",null,i)}const D=o(n,[["render",t]]);export{h as __pageData,D as default};
