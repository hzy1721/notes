import{_ as s,c as n,o as a,d as l}from"./app.a7b44f76.js";const p="data:image/webp;base64,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",o="data:image/webp;base64,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",u=JSON.parse('{"title":"防抖和节流","description":"","frontmatter":{},"headers":[{"level":2,"title":"防抖","slug":"防抖","link":"#防抖","children":[]},{"level":2,"title":"节流","slug":"节流","link":"#节流","children":[{"level":3,"title":"requestAnimationFrame","slug":"requestanimationframe","link":"#requestanimationframe","children":[]}]},{"level":2,"title":"Lodash","slug":"lodash","link":"#lodash","children":[]}],"relativePath":"code/fe/debounce-throttle.md"}'),e={name:"code/fe/debounce-throttle.md"},t=l('<h1 id="防抖和节流" tabindex="-1">防抖和节流 <a class="header-anchor" href="#防抖和节流" aria-hidden="true">#</a></h1><p>浏览器的部分事件触发频率很高，超出了应用需求，以相同频率执行事件处理函数会造成不必要的性能开销。比如 <code>resize</code>、<code>scroll</code>、<code>keypress</code>、<code>mousemove</code> 等。</p><p><strong>防抖 (debounce)</strong> 和<strong>节流 (throttle)</strong> 可以让高频调用的函数在内部以更低的频率执行，既不影响需求的实现，又提高了性能。</p><h2 id="防抖" tabindex="-1">防抖 <a class="header-anchor" href="#防抖" aria-hidden="true">#</a></h2><p>设定一个最短执行间隔，如果小于最短间隔连续多次调用，最终只执行一次。</p><p>应用场景：</p><ul><li>输入框 <code>input</code> 事件，用于表单校验、实时请求等</li><li>窗口 <code>resize</code> 事件，调整完成后再重新渲染</li></ul><p>有两种执行模式：</p><ul><li><code>leading</code><ul><li>定时器设置为：最短间隔后把定时器变量设为 <code>null</code></li><li>每次调用都重置定时器 (没到期就停止再重新开始，到期就直接开始)</li><li>如果定时器变量为 <code>null</code> (表示定时器已到期，间隔足够长)，执行一次 <img src="'+p+'" alt=""></li></ul></li><li><code>trailing</code><ul><li>定时器设置为：最短间隔后执行函数</li><li>每次调用都重置定时器</li><li>如果间隔足够长，则定时器已到期，函数执行了一次；否则定时器还没到期就被重置 <img src="'+o+`" alt=""></li></ul></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> debounce </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">func</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">wait</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">leading</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 定时器</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 必须是 function 函数，不能是箭头函数</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 防抖后的函数也应该保持正确的 this</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 保存 arguments，因为可能在 setTimeout 中执行 func</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arguments</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 清除定时器</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// leading 表示一开始就执行一次，直到足够长的间隔后才执行下一次</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">leading</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 如果间隔足够长 (定时器被清除)，则执行一次</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">callNow</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">timeout</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 重设定时器，到期清除定时器</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wait</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">callNow</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 执行</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">func</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// trailing 表示等待足够长的间隔后才执行一次</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 一段时间后执行，如果在间隔内触发了函数，则会被开头的 clearTimeout 取消执行</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">func</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wait</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="节流" tabindex="-1">节流 <a class="header-anchor" href="#节流" aria-hidden="true">#</a></h2><p>设定一个最短执行间隔 (与防抖的最短间隔<strong>含义不同</strong>)，每个间隔内最多执行一次。</p><p>应用场景：</p><ul><li>页面 <code>scroll</code> 事件，实现滚动加载</li><li>搜索框 <code>input</code> 事件，实现搜索联想</li></ul><p>执行过程：</p><ul><li>定时器设置为：最短间隔后把定时器变量设为 <code>null</code></li><li>如果定时器变量不为 <code>null</code>，说明间隔足够长，定时器已过期，重置定时器并执行一次函数</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> throttle </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">func</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">wait</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 定时器</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果在间隔外，则执行一次</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 重设定时器，到期清除定时器</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wait</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 执行</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">func</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="requestanimationframe" tabindex="-1">requestAnimationFrame <a class="header-anchor" href="#requestanimationframe" aria-hidden="true">#</a></h3><p>相当于 <code>throttle(func, 16)</code>，但是精确度更高。Lodash 的内部实现采用了该函数。</p><p>需要重新计算和渲染元素，并且想要保证变化的平滑性，可以使用该方法。</p><h2 id="lodash" tabindex="-1">Lodash <a class="header-anchor" href="#lodash" aria-hidden="true">#</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">debounced </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">debounce</span><span style="color:#A6ACCD;">(func</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [(wait </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [(options </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">debounced</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cancel</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">throttled </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">throttle</span><span style="color:#A6ACCD;">(func</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [(wait </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [(options </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">throttled</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cancel</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div>`,23),c=[t];function r(F,y,D,i,A,C){return a(),n("div",null,c)}const h=s(e,[["render",r]]);export{u as __pageData,h as default};
