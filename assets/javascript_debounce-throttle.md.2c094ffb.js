import{_ as s,c as n,o as a,a as l}from"./app.b1f5e497.js";const C=JSON.parse('{"title":"\u9632\u6296\u548C\u8282\u6D41","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u6267\u884C\u4E00\u6B21","slug":"\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u6267\u884C\u4E00\u6B21"},{"level":2,"title":"\u9632\u6296 (debounce)","slug":"\u9632\u6296-debounce"},{"level":2,"title":"\u8282\u6D41 (throttle)","slug":"\u8282\u6D41-throttle"},{"level":2,"title":"requestAnimationFrame","slug":"requestanimationframe"}],"relativePath":"javascript/debounce-throttle.md"}'),o={name:"javascript/debounce-throttle.md"},p=l(`<h1 id="\u9632\u6296\u548C\u8282\u6D41" tabindex="-1">\u9632\u6296\u548C\u8282\u6D41 <a class="header-anchor" href="#\u9632\u6296\u548C\u8282\u6D41" aria-hidden="true">#</a></h1><h2 id="\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u6267\u884C\u4E00\u6B21" tabindex="-1">\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u6267\u884C\u4E00\u6B21 <a class="header-anchor" href="#\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u6267\u884C\u4E00\u6B21" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> outerPane </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> $details</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.details-pane-outer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    didScroll </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#82AAFF;">$</span><span style="color:#A6ACCD;">(window)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scroll</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">didScroll</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#82AAFF;">setInterval</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> ( </span><span style="color:#A6ACCD;">didScroll</span><span style="color:#F07178;"> ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">didScroll</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// Check your page position and then</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// Load in more results</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">250</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u9632\u6296-debounce" tabindex="-1">\u9632\u6296 (debounce) <a class="header-anchor" href="#\u9632\u6296-debounce" aria-hidden="true">#</a></h2><p>\u5982\u679C\u4E00\u4E2A\u4E8B\u4EF6\u77ED\u65F6\u95F4\u5185\u8FDE\u7EED\u591A\u6B21\u89E6\u53D1\uFF0C\u5219\u53EA\u6267\u884C\u4E00\u6B21\u5904\u7406\u51FD\u6570\u3002</p><p>\u6709\u4E24\u79CD\u6267\u884C\u6A21\u5F0F\uFF1A</p><ul><li><code>leading</code>\uFF1A\u7B2C\u4E00\u4E2A\u4E8B\u4EF6\u89E6\u53D1\u65F6\u7ACB\u5373\u6267\u884C\u5904\u7406\u51FD\u6570\uFF0C\u76F4\u5230\u8DB3\u591F\u957F\u7684\u505C\u987F\u540E\u518D\u6B21\u89E6\u53D1\u4E8B\u4EF6\u624D\u4F1A\u91CD\u65B0\u6267\u884C\u5904\u7406\u51FD\u6570</li><li><code>trailing</code>\uFF1A\u5982\u679C\u8DDD\u79BB\u4E0A\u4E00\u6B21\u89E6\u53D1\u4E8B\u4EF6\u7684\u65F6\u95F4\u8FC7\u77ED\uFF0C\u5219\u91CD\u7F6E\u95F4\u9694\u65F6\u95F4\uFF0C\u76F4\u5230\u8DB3\u591F\u957F\u7684\u505C\u987F\u540E\u624D\u6267\u884C\u5904\u7406\u51FD\u6570</li></ul><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#FFCB6B;">Function</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">debounce</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">threshold</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> execAsap</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">func</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// reference to original function</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">timeout</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// handle to setTimeout async task (detection period)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// return the new debounced function which executes the original function only once</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// until the detection period expires</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">debounced</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">obj</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// reference to original context object</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arguments</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// arguments at execution time</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// this is the detection function. it will be executed if/when the threshold expires</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">delayed</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// if we&#39;re executing at the end of the detection period</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">execAsap</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">func</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// execute now</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// clear timeout handle</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// stop any current detection period</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// otherwise, if we&#39;re not already waiting and we&#39;re executing at the beginning of the detection period</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">execAsap</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">func</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// execute now</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// reset the detection period</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">delayed</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">threshold</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6700\u5E38\u7528\u7684\u662F Lodash \u63D0\u4F9B\u7684 <code>_.debounce</code>\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">debounce</span><span style="color:#A6ACCD;">(func</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [wait</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [options</span><span style="color:#89DDFF;">={}</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><p>\u8FD8\u53EF\u4EE5\u53D6\u6D88\u9632\u6296\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> debounced_version </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> _</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">debounce</span><span style="color:#A6ACCD;">(doSomething</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">$</span><span style="color:#A6ACCD;">(window)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">scroll</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> debounced_version)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u5982\u679C\u9700\u8981\u7684\u8BDD</span></span>
<span class="line"><span style="color:#A6ACCD;">debounced_version</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cancel</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="\u8282\u6D41-throttle" tabindex="-1">\u8282\u6D41 (throttle) <a class="header-anchor" href="#\u8282\u6D41-throttle" aria-hidden="true">#</a></h2><p>\u65E0\u8BBA\u4E8B\u4EF6\u89E6\u53D1\u9891\u7E41\u4E0E\u5426\uFF0C\u4FDD\u8BC1\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u6267\u884C\u4E00\u6B21 (\u6700\u5C11\u4E00\u6B21\uFF0C\u6700\u591A\u4E00\u6B21)\u3002</p><p>\u4E0E\u9632\u6296\u7C7B\u4F3C\uFF0C\u6709 <code>leading</code> \u548C <code>trailing</code> \u4E24\u79CD\u6A21\u5F0F\u3002</p><p>\u53EF\u4EE5\u4F7F\u7528 Lodash \u7684 <code>_.throttle</code>\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">_</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">throttle</span><span style="color:#A6ACCD;">(func</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [wait</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [options</span><span style="color:#89DDFF;">={}</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><h2 id="requestanimationframe" tabindex="-1">requestAnimationFrame <a class="header-anchor" href="#requestanimationframe" aria-hidden="true">#</a></h2><p>\u7B49\u4EF7\u4E8E <code>_.throttle(func, 16)</code>\uFF0C\u4F46\u662F\u7CBE\u786E\u5EA6\u66F4\u9AD8\u3002</p><p>\u9700\u8981\u91CD\u65B0\u8BA1\u7B97\u548C\u6E32\u67D3\u5143\u7D20\uFF0C\u5E76\u4E14\u60F3\u8981\u4FDD\u8BC1\u53D8\u5316\u7684\u5E73\u6ED1\u6027\uFF0C\u53EF\u4EE5\u4F7F\u7528\u8BE5\u65B9\u6CD5\u3002</p>`,20),e=[p];function t(c,r,y,F,D,i){return a(),n("div",null,e)}var d=s(o,[["render",t]]);export{C as __pageData,d as default};
