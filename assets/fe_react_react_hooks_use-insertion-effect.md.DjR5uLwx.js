import{_ as e,c as s,o as i,a1 as t}from"./chunks/framework.mNpZ2GHZ.js";const u=JSON.parse('{"title":"useInsertionEffect","description":"","frontmatter":{},"headers":[],"relativePath":"fe/react/react/hooks/use-insertion-effect.md","filePath":"fe/react/react/hooks/use-insertion-effect.md","lastUpdated":1702822707000}'),a={name:"fe/react/react/hooks/use-insertion-effect.md"},n=t(`<h1 id="useinsertioneffect" tabindex="-1">useInsertionEffect <a class="header-anchor" href="#useinsertioneffect" aria-label="Permalink to &quot;useInsertionEffect&quot;">​</a></h1><p>React 更新 DOM 之前触发的 effect，通常用于插入动态 CSS。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useInsertionEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(setup, dependencies</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>参数/返回值：同 <code>useEffect</code></p><p>警告：</p><ul><li>不能在 <code>useInsertionEffect</code> 内更新状态</li><li>触发时 DOM 还未更新，ref 也没设置</li></ul><p>用途：</p><ul><li>CSS-in-JS 库动态插入 <code>&lt;style&gt;</code><ul><li>相比渲染时插入： <ul><li>React 渲染是非阻塞的，渲染过程中每一帧浏览器都会重新计算样式，严重影响性能</li></ul></li><li>相比 <code>useLayoutEffect</code> 和 <code>useEffect</code>： <ul><li>确保其他 effect 触发时是最新的样式，否则会导致 effect 内的布局计算出现错误</li></ul></li></ul></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useInsertionEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  document.head.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(styleElement);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div>`,9),l=[n];function c(p,o,h,d,r,f){return i(),s("div",null,l)}const E=e(a,[["render",c]]);export{u as __pageData,E as default};
