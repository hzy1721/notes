# 内存泄漏

本质：保持引用不再使用的对象，导致无用对象无法回收，内存持续被占用。

## 可能原因

1. 全局变量 (永远不会被回收，谨慎使用)
2. 闭包引用的外部变量
3. 定时器用完没有清除 (`clearTimeout`)
4. 元素从 DOM 移除，但还有变量引用
5. `console.log` (不打开控制台没事)

## 排查流程

代码角度：

1. 打开 Performance，手动 GC 一次，勾选 Memory，开始录制
2. 做一些操作，触发内存增长，再手动 GC 一次
3. 定位无法被 GC 的内存分配时间点，点击火焰图中的任务查看对应代码
4. 分析可能的问题并修改

内存角度：

1. 打开 Memory，手动 GC 一次，录制一次堆快照
2. 做一些操作，触发内存增长，再手动 GC 一次
3. 再录制一次堆快照，对比前后两次快照，找到增长最多的对象
4. 分析可能的问题并修改
5. 也可以实时记录内存分配，定位内存增长后没有被 GC 的部分
