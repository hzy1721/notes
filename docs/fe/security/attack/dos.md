# DoS

DoS (Denial of Service，拒绝服务) 指的是通过某种手段使服务器资源被显著消耗，无法响应更多请求，造成雪崩效应，最终导致服务不可用。

## DDoS

DDoS (Distributed DoS) 指的是大量僵尸设备在短时间内向服务器发起请求，造成服务端**带宽**或 **CPU** 耗尽，无法响应新请求。

有以下特点：

- 直接访问 IP
- 不区分 API
- 消耗大量带宽

常见的有 SYN Flood。

防御措施：

- 流量治理
  - 负载均衡
  - API 网关
  - CDN
- 快速自动扩容
- 非核心服务降级

## ReDoS (Regex DoS)

不加问号 `?` 的正则表达式拥有**贪婪匹配**的特性，通过构造特定结构的字符串能够造成正则匹配过程中的大量回溯，使接口响应时间大幅增加、吞吐量大幅减少。

![截屏2022-08-01 08.58.48.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/159221d7ebb2449abae4ab3ddf4d636a~tplv-k3u1fbpfcp-watermark.image?)

防御措施：

- Code Review
  - 避免上线此类代码
- 代码扫描+正则性能测试
- 不使用用户提供的正则

## Logical DoS

开发者编写的一些不合理的代码或一些不合理的需求，也会导致服务器资源被大量消耗、接口响应时间变长，比如：

- 耗时的同步操作
- 数据库写入
- SQL join
- 文件备份
- 循环执行逻辑
